{% for group_name, choices in optgroups %}
   {% for choice in choices %}
      <label
         for="{{ attrs.id }}_{{ forloop.counter }}"
         class="mdl-radio mdl-js-radio mdl-js-ripple-effect">

         <input
            type="radio"
            id="{{ attrs.id }}_{{ forloop.counter }}"
            class="mdl-radio__button"
            value="{{ choice.0 }}"
            name="{{ name }}"
            {% if required %} required{% endif %}
            {% if choice.0 in value %} checked{% endif %}
            >

         <span class="mdl-radio__label">{{ choice.1 }}</span>
      </label>
   {% endfor %}
{% endfor %}
